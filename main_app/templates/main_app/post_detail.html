{% extends "base.html"%} {% block content %}

<h1>Post Details</h1>

<div class="row">
  <div class="col s6 col-offset-3">
    <div class="card">
      <div class="card-content">
        <div class="card-content">
          <span class="card-title">{{post.title}}</span>
          <img src="{{post.images}}" alt="" />
          <!-- Insert photo markup below this comment -->
          {% for photo in post.photo_set.all %}
          <img class="responsive-img card-panel" src="{{photo.url}}" />
          {% empty %}
          <div class="card-panel teal-text center-align">
            No Photos Uploaded
          </div>
          {% endfor %} <img src="{{post.files}}" alt="" />
          <p>{{post.text_content}}</p>
          <p>Tags: {{post.tags}}</p>
          <p>Download Count: {{post.downloads}}</p>
          <p>{{account.name}}</p>
        </div>
        <div>
          <a href="{% url 'comment_create' post.id %}">Add Comment</a>
        </div>
        <div>
          <div class="card-action">
            <form
              action="{% url 'add_photo' post.id %}"
              enctype="multipart/form-data"
              method="POST"
              class="card-panel"
            >
              {% csrf_token %}
              <input type="file" name="photo-file" />
              <br /><br />
              <input type="submit" class="btn" value="Upload Photo" />
            </form>
            <a href="{% url 'post_update' post.id%}">Edit</a>
            <a href="{% url 'post_delete' post.id%}">Delete</a>
          </div>
        </div>
      </div>
    </div>
    <table>
      <tr>
        <th>Title</th>
        <th>Content</th>
        <th>Images</th>
      </tr>
      {% for comment in post.comments%}
      <tr>
        <td>{{comment.title}}</td>
        <td>{{comment.text_content}}</td>
        <td>{{comment.images}}</td>
      </tr>
      <a href="{% url 'comment_update' comment.id%}">Edit</a>
      <a href="{% url 'comment_delete' comment.id%}">Delete</a>
      {%endfor%}
    </table>
  </div>
  {% endblock %}
</div>
